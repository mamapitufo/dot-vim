#!/usr/bin/env bash

set -e
set -o pipefail

sudo -v

DOTFILES=$(cd "$(dirname "$0")" && pwd)
SYSTEM=`uname -s`

pushd $DOTFILES

if [ $SYSTEM = "Linux" ]; then
    echo "Installing required packages..."
    sudo xbps-install -S `paste -d' ' -s tilde-packages`
fi

stow -R -t ~/ $(ls -d */)
./bin/bin/tilde-update

popd

